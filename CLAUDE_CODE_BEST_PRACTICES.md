# 💬 与Claude Code高效对话完全指南

## 🎯 核心原则

### ✅ 高效对话的黄金法则
1. **明确具体**: 说清楚要做什么，不要模糊表达
2. **一次一事**: 每次对话专注一个主要任务
3. **提供上下文**: 告诉Claude当前状态和背景
4. **验收标准**: 明确说出期望的结果
5. **错误反馈**: 发现问题时详细描述

## 🗣️ 对话模板与示例

### 1. 功能开发类对话

#### ❌ 低效表达
```
"帮我做一个用户系统"
"这个页面有问题，修复一下"
"添加一些功能"
```

#### ✅ 高效表达
```
"请为SSAT学习应用实现用户认证系统，需要包含：
1. 登录/注册页面（/auth）
2. 用户状态管理（Zustand）
3. 路由保护（authenticated required）
4. 用户信息存储（Supabase）
5. 验收标准：用户可以注册、登录，并访问受保护页面"
```

```
"写作模块的Core Summarizer有问题：
1. 当前问题：显示用户上传的文档而不是AI生成的概括训练文章
2. 期望行为：每次加载都应该生成新的概括练习文章
3. 技术要求：使用Gemini AI生成，存储到knowledge_base表
4. 验收标准：用户每次打开都看到不同的概括练习内容"
```

### 2. 问题诊断类对话

#### ❌ 低效表达
```
"AI生成不工作"
"数据库有问题"
"页面报错了"
```

#### ✅ 高效表达
```
"AI词汇生成系统效率低，需要诊断分析：
1. 现状：运行2天只生成103个有效词汇，存在大量重复
2. 预期：每天应该生成144个新词汇（5分钟间隔，每次30个）
3. 请检查：
   - 调度器是否正常工作
   - AI生成API是否有错误
   - 数据库插入是否成功
   - 去重机制是否有效
4. 提供：完整的问题分析和解决方案"
```

### 3. 代码优化类对话

#### ❌ 低效表达
```
"这段代码可以优化吗？"
"性能不好，帮我改进"
```

#### ✅ 高效表达
```
"请优化词汇学习算法的性能：
1. 当前问题：加载1000+词汇时首屏渲染超过3秒
2. 技术栈：React 19 + Supabase + 艾宾浩斯算法
3. 优化目标：
   - 首屏加载时间<1秒
   - 支持虚拟滚动
   - 实现分页或懒加载
   - 保持算法准确性
4. 约束：不改变现有API接口和数据结构"
```

## 🎨 不同类型任务的对话策略

### 📝 新功能开发

**对话结构**:
```markdown
## 功能需求
[详细描述要实现的功能]

## 技术要求  
[指定技术栈、API、数据库等]

## 设计要求
[UI/UX设计规范、交互逻辑]

## 验收标准
[明确的完成标准]

## 优先级
[功能的重要性和时间要求]
```

**示例**:
```
请实现SSAT写作练习的AI评分系统：

## 功能需求
- 用户提交作文后，AI给出多维度评分（1-5分）
- 评分维度：主题焦点、结构逻辑、论证证据、语言风格、整体影响
- 提供详细的改进建议和示例

## 技术要求
- 后端：Next.js API Routes + Google Gemini 1.5-pro
- 前端：React 19 + TypeScript + Tailwind CSS
- 数据存储：Supabase（user_submissions表）
- 响应时间：<10秒

## 设计要求
- 评分结果可视化（雷达图或条形图）
- 反馈信息分类显示（优点/建议/示例）
- 移动端适配，符合现有设计系统

## 验收标准
- AI评分准确性>85%
- 用户可以保存评分历史
- 支持重新评分功能
- 错误处理完善

## 优先级
高（核心功能，需要1周内完成）
```

### 🐛 Bug修复类

**对话结构**:
```markdown
## 问题描述
[具体的错误现象]

## 复现步骤  
[如何触发这个问题]

## 期望行为
[正确的行为应该是什么]

## 错误信息
[控制台错误、日志等]

## 环境信息
[浏览器、设备、网络等]
```

**示例**:
```
词汇复习算法计算错误，需要紧急修复：

## 问题描述
用户答对词汇后，下次复习时间计算错误，导致复习频率过高

## 复现步骤
1. 进入词汇复习页面
2. 答对一个Level 2的词汇
3. 查看该词汇的next_review_date
4. 发现仍然显示今天，而不是应该的3天后

## 期望行为
Level 2词汇答对后，应该间隔3天再复习（艾宾浩斯算法）

## 错误信息
Console显示：next_review_date: 2025-07-29（今天）
应该是：next_review_date: 2025-08-01（3天后）

## 涉及文件
- /app/api/flashcards/enhanced/route.ts（算法实现）
- /lib/memory-algorithm.ts（艾宾浩斯逻辑）
```

### ⚡ 性能优化类

**对话结构**:
```markdown
## 性能问题
[具体的性能指标和问题]

## 测试数据
[性能测试结果]

## 优化目标
[期望达到的性能指标]

## 技术约束
[不能改变的技术限制]

## 优化范围
[哪些部分可以优化]
```

### 🎨 UI/UX改进类

**对话结构**:
```markdown
## 当前设计问题
[用户体验的具体问题]

## 改进目标
[期望的用户体验]

## 设计规范
[遵循的设计系统]

## 响应式要求
[不同设备的适配需求]

## 交互逻辑
[具体的交互行为]
```

## 🎯 提高对话质量的技巧

### 1. 使用精确的技术术语
```
❌ "那个AI东西不行了"
✅ "Gemini API调用返回429错误，疑似达到速率限制"

❌ "数据库查询很慢"  
✅ "Supabase查询flashcards表时，JOIN操作耗时3秒，需要索引优化"
```

### 2. 提供完整的上下文
```
❌ "这个函数有问题"
✅ "calculateNextReview函数在处理Level 6词汇时返回NaN，
    输入参数：currentLevel=6, isCorrect=true, lastReview='2025-07-29'
    期望返回：90天后的日期"
```

### 3. 明确验收标准
```
❌ "做得好一点"
✅ "要求：
    - 页面加载时间 < 2秒
    - 移动端适配完美
    - 支持键盘导航
    - 通过WCAG 2.1 AA标准
    - 代码覆盖率 > 80%"
```

### 4. 分解复杂任务
```
❌ "做一个完整的学习系统"
✅ "分阶段实现学习系统：
    Phase 1: 词汇数据结构设计和API
    Phase 2: 基础学习界面和交互
    Phase 3: 艾宾浩斯算法集成
    Phase 4: 进度统计和可视化
    Phase 5: 高级功能（导出、分享等）"
```

## 🔄 迭代对话最佳实践

### 1. 确认理解
```
用户："请实现用户登录功能"
Claude："我理解您需要实现用户登录功能。让我确认几个细节：
1. 使用邮箱+密码还是支持第三方登录（Google/Apple）？
2. 是否需要忘记密码功能？
3. 登录状态保持多久（Session/JWT）？
4. 是否需要二步验证？
请确认这些需求，我会提供完整的实现方案。"
```

### 2. 逐步实现
```
用户："功能太复杂了，分步骤实现"
Claude："好的，我将分3步实现：
Step 1: 创建基础登录表单和API（今天完成）
Step 2: 添加状态管理和路由保护（明天完成）  
Step 3: 完善错误处理和用户体验（后天完成）
现在开始实现Step 1，您觉得这个计划如何？"
```

### 3. 主动询问
```
Claude："登录功能已实现，请测试一下。同时我想确认：
1. 登录速度是否满足预期？
2. 错误提示是否清晰？
3. 是否需要添加'记住我'功能？
4. 下一步是否开始实现用户资料页面？"
```

## 🚀 Claude Code特殊能力利用

### 1. 并行工具调用
```
"请同时执行以下任务：
1. 检查词汇生成API的日志
2. 分析数据库中的重复词汇
3. 查看调度器的运行状态
4. 测试AI生成功能
然后给我一个综合分析报告"
```

### 2. 代码理解能力
```
"请分析整个写作模块的代码架构：
1. 阅读/app/writing/目录下的所有文件
2. 理解三个子模块的交互关系
3. 识别潜在的代码重复和优化点
4. 提供重构建议"
```

### 3. 文档生成能力
```
"基于当前代码库，自动生成：
1. API文档（所有路由和参数）
2. 组件使用指南
3. 数据库表结构说明
4. 部署和配置指南
格式要求：Markdown，包含代码示例"
```

## ⚠️ 常见对话陷阱

### 1. 避免模糊描述
```
❌ "这个不对"、"有问题"、"不好用"
✅ 具体描述问题现象、期望行为、错误信息
```

### 2. 避免一次性巨量需求
```
❌ "帮我做一个完整的学习平台，包含所有功能"
✅ 分解为具体的、可管理的任务
```

### 3. 避免技术细节缺失
```
❌ "用AI生成内容"
✅ "使用Google Gemini 1.5-pro API，通过指定的prompt模板生成SSAT词汇，
    格式为JSON，包含word、definition、difficulty等字段"
```

### 4. 避免忽视验收标准
```
❌ "做好了告诉我"
✅ "完成标准：功能测试通过、代码review通过、性能符合要求、
    文档更新完成"
```

## 🎯 总结：高效对话公式

```
高效对话 = 明确需求 + 技术细节 + 验收标准 + 上下文信息

实际应用：
"[背景] 在SSAT学习应用中，[问题] 词汇生成效率低，
[需求] 需要优化AI生成算法，[技术] 使用Gemini API和Supabase，
[标准] 达到每小时200个有效词汇，[约束] 不能改变现有数据结构，
[时间] 本周内完成"
```

**记住**：Claude Code是您的技术合作伙伴，清晰的沟通能让它发挥最大价值！🚀

## 🛠️ 实战练习模板

尝试用这个模板重新描述您的下一个需求：

```markdown
## 项目背景
[当前项目状态和目标]

## 具体需求  
[要解决的具体问题]

## 技术要求
[使用的技术栈和约束]

## 验收标准
[明确的完成标准]

## 时间要求
[期望完成时间]

## 优先级
[重要性和紧急程度]
```

用这种方式与Claude Code对话，您会发现效率和质量都会显著提升！💪